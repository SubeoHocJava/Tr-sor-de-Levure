@model Web_WineShop.Models.ProfileModel.OrderHistoryModel

	<h3 class="font-weight-bold h3-color text-center">ORDER HISTORY</h3>
	<div class="mt-4">
		@if (Model.Orders != null)
			@foreach (var order in Model.Orders)
			{
				<!-- Invoice 1 -->
				<div class="border p-3 mb-4">
					<div class="collapse-btn">
						<h5 class="font-weight-bold">Invoice #@order.Id</h5>
						<p><strong>Date: </strong> @order.Details.Dates.FirstOrDefault()?.Date.ToString("MM/dd/yyyy")</p>
						<p><strong>Status: </strong> @order.IsDelivered</p>
						<ul class="timsline">
							@foreach (var dates in order.Details.Dates)
							{
								<li><strong>@dates.State.StateName </strong>@dates.Date.ToString("yyyy-MM-dd, hh:mm tt")</li>
							}
						</ul>
						<hr>
					</div>

					<!-- Collapse content for invoice details -->
					<div class="collapse-content">
						<p><strong>Products:</strong></p>
						<div class="mb-3" id="product-list">
							<div class="row">
								@foreach (var item in order.Details.Items)
								{
									<div class="col-6 mb-3">
										<div class="d-flex align-items-center mb-3">
											<img src="~/img_product/Glen-Moray-12-300x450.jpg"
												 alt="Product A" class="img-thumbnail"
												 style="width: 160px; height: auto;" />
											<div class="ms-3">
												<p><strong> @item.Product.Name</strong></p>
												<p>@item.Quantity</p>
												<p><strong>Price:</strong> $@item.Product.Price</p>
												<div class="d-flex flex-column">
													<div class="d-flex align-items-center mb-3">
														<strong>Review:</strong>
														<div class="stars ms-2 @(order.IsDelivered ? "stars-selected" : "")" data-value="@item.Rating" data-id="@item.Product.Id-@item.OrderDetailId">
															<span class="star" data-value="1">&#9734;</span>
															<span class="star" data-value="2">&#9734;</span>
															<span class="star" data-value="3">&#9734;</span>
															<span class="star" data-value="4">&#9734;</span>
															<span class="star" data-value="5">&#9734;</span>
														</div>
													</div>
													<div class="d-flex">
														<button class="btn btn-profile me-2 buy_again-btn @(order.IsDelivered ? "disabled-btn" : "")">Buy again</button>
													</div>
												</div>
											</div>
										</div>
									</div>
								}
							</div>
						</div>
					</div>
					<p><strong>Total Price:</strong> $@order.Details.TotalPrice()</p>
					<p><strong>Discount:</strong> $@order.Details.GetDiscount()</p>
				</div>
				<p><strong>Total Amount:</strong> @order.TotalAmount</p>
			}
		else
		{
			<p>
				Bạn chưa có đơn hàng nào
			</p>
		}
	</div>